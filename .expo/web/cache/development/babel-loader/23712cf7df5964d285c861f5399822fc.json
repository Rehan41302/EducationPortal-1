{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\React\\\\Arslan\\\\native\\\\components\\\\StudentRegister.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport * as React from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport firebase from \"../config/fire\";\nimport { firestore } from \"firebase\";\nimport { UrlIsValid } from \"../service/validations\";\nimport { connect } from \"react-redux\";\nimport store from \"../store/store\";\nimport { addUserDetailsAction } from \"../store/actions/userActions\";\n\nvar StudentRegister = function (_React$Component) {\n  _inherits(StudentRegister, _React$Component);\n\n  var _super = _createSuper(StudentRegister);\n\n  function StudentRegister() {\n    var _this;\n\n    _classCallCheck(this, StudentRegister);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      name: '',\n      subject: '',\n      level: '',\n      contactNumber: Number,\n      error: {},\n      disabled: true,\n      loading: false\n    };\n\n    _this.isValid = function () {\n      var _this$state = _this.state,\n          name = _this$state.name,\n          contactNumber = _this$state.contactNumber,\n          level = _this$state.level,\n          subject = _this$state.subject;\n      var noError = true;\n\n      if (!name || !contactNumber || !level || !subject) {\n        _this.setState(function (_ref) {\n          var errors = _ref.errors;\n          return {\n            errors: _objectSpread(_objectSpread({}, errors), {}, {\n              emptyError: \"All Fields are required.\"\n            })\n          };\n        });\n\n        noError = false;\n      }\n\n      return noError;\n    };\n\n    _this.uploadStudentDetails = function () {\n      console.log(\"clicked\", _this.state, _this.props.user);\n\n      _this.setState({\n        errors: {}\n      });\n\n      var _this$state2 = _this.state,\n          name = _this$state2.name,\n          contactNumber = _this$state2.contactNumber,\n          level = _this$state2.level,\n          subject = _this$state2.subject;\n      console.log({\n        isValid: _this.isValid()\n      });\n\n      if (_this.isValid()) {\n        var _this$props$user;\n\n        _this.setState({\n          loading: true\n        });\n\n        var db = firebase.firestore();\n        db.collection(\"students\").doc((_this$props$user = _this.props.user) == null ? void 0 : _this$props$user.id).set({\n          name: name,\n          contactNumber: contactNumber,\n          level: level,\n          subject: subject,\n          createTime: firestore.Timestamp.now()\n        }).then(function (res) {\n          store.dispatch(addUserDetailsAction(_objectSpread(_objectSpread({}, _this.props.user), {}, {\n            name: name,\n            contactNumber: contactNumber,\n            level: level,\n            subject: subject\n          })));\n          console.log(\"res---\", res);\n          setTimeout(function () {\n            _this.clearInputs();\n\n            _this.setState({\n              loading: false\n            });\n\n            _this.props.navigation.replace(\"Student Profile\");\n          }, 100);\n        }).catch(function (error) {\n          console.error(error.message);\n\n          _this.setState({\n            loading: false\n          });\n\n          Alert.alert(error.message);\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(StudentRegister, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props.user);\n      var _this$state3 = this.state,\n          name = _this$state3.name,\n          contactNumber = _this$state3.contactNumber,\n          level = _this$state3.level,\n          subject = _this$state3.subject,\n          loading = _this$state3.loading;\n      var btnDisabled = name && contactNumber && level && subject ? false : true;\n      return React.createElement(ImageBackground, {\n        style: styles.image,\n        source: require(\"../assets/image/studentregisterpic.jpg\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 10\n        }\n      }, React.createElement(ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 10\n        }\n      }, React.createElement(Text, {\n        style: styles.htext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, \"Student Registration\"), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"Student Name\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: name,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            name: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 12\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"Interested for subject\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: subject,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            subject: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 2\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"student class level\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: level,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            level: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"student contact no\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: contactNumber,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            contactNumber: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }\n      }), React.createElement(View, {\n        style: styles.btnView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        style: styles.btn,\n        onPress: this.uploadStudentDetails,\n        title: !this.state.loading ? \"Register\" : \"Loading...\",\n        color: \"#2196F3\",\n        disabled: btnDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }))));\n    }\n  }]);\n\n  return StudentRegister;\n}(React.Component);\n\nexport { StudentRegister as default };\nvar styles = StyleSheet.create({\n  image: {\n    width: '100%',\n    height: '100%'\n  },\n  inputBox: {\n    width: 200,\n    backgroundColor: 'grey',\n    borderRadius: 25,\n    marginLeft: 6,\n    marginBottom: 8,\n    paddingHorizontal: 19,\n    fontSize: 16,\n    color: '#ffffff',\n    marginVertical: 3\n  },\n  button: {\n    width: 160,\n    backgroundColor: \"#2196F3\",\n    borderRadius: 25,\n    marginVertical: 10,\n    paddingVertical: 13,\n    marginHorizontal: 6\n  },\n  buttonText: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: 'white',\n    textAlign: 'center'\n  },\n  htext: {\n    marginTop: 9,\n    marginBottom: 72,\n    fontWeight: 'bold',\n    fontSize: 26,\n    marginHorizontal: 22\n  }\n});","map":{"version":3,"sources":["E:/React/Arslan/native/components/StudentRegister.js"],"names":["React","firebase","firestore","UrlIsValid","connect","store","addUserDetailsAction","StudentRegister","state","name","subject","level","contactNumber","Number","error","disabled","loading","isValid","noError","setState","errors","emptyError","uploadStudentDetails","console","log","props","user","db","collection","doc","id","set","createTime","Timestamp","now","then","res","dispatch","setTimeout","clearInputs","navigation","replace","catch","message","Alert","alert","btnDisabled","styles","image","require","htext","inputBox","text","btnView","btn","Component","StyleSheet","create","width","height","backgroundColor","borderRadius","marginLeft","marginBottom","paddingHorizontal","fontSize","color","marginVertical","button","paddingVertical","marginHorizontal","buttonText","fontWeight","textAlign","marginTop"],"mappings":"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","sourcesContent":["\r\nimport * as React from 'react';\r\nimport { Text, View, StyleSheet, Image,ScrollView,TextInput,TouchableOpacity,ImageBackground,Button,StatusBar } from 'react-native';\r\nimport firebase from \"../config/fire\";\r\nimport { firestore } from \"firebase\";\r\nimport { UrlIsValid } from \"../service/validations\";\r\nimport { connect } from \"react-redux\";\r\nimport store from \"../store/store\";\r\nimport { addUserDetailsAction } from \"../store/actions/userActions\";\r\nexport default class StudentRegister extends React.Component{\r\n  state={\r\n    name:'',\r\n    subject:'',\r\n    level:'',\r\n    contactNumber:Number,\r\n    error:{},\r\n    disabled: true,\r\n    loading: false,\r\n\r\n  }\r\n  isValid = () => {\r\n    const { name, contactNumber, level, subject } = this.state;\r\n    let noError = true;\r\n    if (!name || !contactNumber || !level || !subject) {\r\n      this.setState(({ errors }) => ({\r\n        errors: { ...errors, emptyError: \"All Fields are required.\" }\r\n      }));\r\n      noError = false;\r\n    }\r\n    return noError;\r\n  };\r\n\r\n  uploadStudentDetails = () => {\r\n    console.log(\"clicked\", this.state,this.props.user);\r\n    this.setState({ errors: {} });\r\n    const { name, contactNumber, level, subject } = this.state;\r\n    // this.clearInputs();\r\n    console.log({ isValid: this.isValid() });\r\n    if (this.isValid()) {\r\n      this.setState({ loading: true });\r\n      const db = firebase.firestore();\r\n      db.collection(\"students\")\r\n        .doc(this.props.user?.id)\r\n        .set({\r\n          name,\r\n          contactNumber,\r\n          level,\r\n          subject,\r\n          createTime: firestore.Timestamp.now()\r\n        })\r\n        .then(res => {\r\n          store.dispatch(\r\n            addUserDetailsAction({\r\n              ...this.props.user,\r\n              name,\r\n              contactNumber,\r\n              level,\r\n              subject\r\n            })\r\n          );\r\n          console.log(\"res---\", res);\r\n          setTimeout(() => {\r\n            this.clearInputs();\r\n            this.setState({ loading: false });\r\n            this.props.navigation.replace(\"Student Profile\");\r\n          }, 100);\r\n        })\r\n        .catch(error => {\r\n          console.error(error.message);\r\n          this.setState({ loading: false });\r\n          Alert.alert(error.message);\r\n        });\r\n    }\r\n  };\r\n     render(){\r\n       console.log(this.props.user)\r\n    const { name, contactNumber, level, subject,loading } = this.state;\r\n    let btnDisabled =\r\n    name && contactNumber && level && subject  ? false : true;\r\n       return(\r\n     \r\n         <ImageBackground style={styles.image} source={require('../assets/image/studentregisterpic.jpg')}>\r\n         \r\n         <ScrollView>\r\n          <Text style={styles.htext}>Student Registration</Text>\r\n           <TextInput style={styles.inputBox}  underlineColorAndroid='rgba(0,0,0,0)' \r\n              placeholder=\"Student Name\"\r\n              placeholderTextColor = \"#ffffff\"\r\n              selectionColor=\"#fff\"\r\n              value={name}\r\n              onChangeText={text => {\r\n                this.setState({ name: text });\r\n              }}\r\n              />\r\n\r\n <TextInput style={styles.inputBox}  underlineColorAndroid='rgba(0,0,0,0)' \r\n              placeholder=\"Interested for subject\"\r\n              placeholderTextColor = \"#ffffff\"\r\n              selectionColor=\"#fff\"\r\n              value={subject}\r\n              onChangeText={text => {\r\n                this.setState({ subject: text });\r\n              }}\r\n              />\r\n              \r\n              <TextInput style={styles.inputBox}  underlineColorAndroid='rgba(0,0,0,0)' \r\n              placeholder=\"student class level\"\r\n              placeholderTextColor = \"#ffffff\"\r\n              selectionColor=\"#fff\"\r\n              value={level}\r\n              onChangeText={text => {\r\n                this.setState({ level: text });\r\n              }}\r\n              />\r\n\r\n              <TextInput style={styles.inputBox}  underlineColorAndroid='rgba(0,0,0,0)' \r\n              placeholder=\"student contact no\"\r\n              placeholderTextColor = \"#ffffff\"\r\n              selectionColor=\"#fff\"\r\n              value={contactNumber}\r\n              onChangeText={text => {\r\n                this.setState({ contactNumber: text });\r\n              }}\r\n              />\r\n                    <View style={styles.btnView}>\r\n          <Button\r\n            style={styles.btn}\r\n            onPress={this.uploadStudentDetails}\r\n            // title={!this.state.loading ? \"Submit\" : <ActivityIndicator />}\r\n            title={!this.state.loading ? \"Register\" : \"Loading...\"}\r\n            color=\"#2196F3\"\r\n            disabled={btnDisabled}\r\n          />\r\n        </View> \r\n         </ScrollView>\r\n         \r\n         </ImageBackground>\r\n         \r\n       )\r\n     }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n \r\n  \r\n  image:{\r\n   \r\n    width:'100%',\r\n    height:'100%'\r\n  },\r\n  inputBox: {\r\n    width:200,\r\n    backgroundColor:'grey',\r\n    borderRadius: 25,\r\n    marginLeft:6,\r\n    marginBottom:8,\r\n    paddingHorizontal:19,\r\n    fontSize:16,\r\n    color:'#ffffff',\r\n    marginVertical: 3,\r\n  \r\n  },\r\n   button: {\r\n    width:160,\r\n    backgroundColor:\"#2196F3\",\r\n     borderRadius: 25,\r\n      marginVertical: 10,\r\n      paddingVertical: 13,\r\n      marginHorizontal:6\r\n  },\r\n  buttonText: {\r\n    fontSize:16,\r\n    fontWeight:'500',\r\n    color:'white',\r\n    textAlign:'center'\r\n  },\r\n  htext:{\r\n     marginTop:9,\r\n     marginBottom:72,\r\n    fontWeight: 'bold',\r\n    fontSize: 26,\r\n    marginHorizontal:22\r\n\r\n  }\r\n  });"]},"metadata":{},"sourceType":"module"}