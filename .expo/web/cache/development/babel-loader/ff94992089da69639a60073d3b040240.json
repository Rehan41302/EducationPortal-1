{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/denoversshehroz/Documents/React Native/Rehan/EducationPortal/components/tutordashboard/QuizUpload.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport firebase from \"../../config/fire\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { Avatar, Button, Card, Title, Paragraph } from \"react-native-paper\";\n\nvar QuizUpload = function (_React$Component) {\n  _inherits(QuizUpload, _React$Component);\n\n  var _super = _createSuper(QuizUpload);\n\n  function QuizUpload() {\n    var _this;\n\n    _classCallCheck(this, QuizUpload);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      fullPath: \"\",\n      downloadURL: \"\"\n    };\n\n    _this.pickDocumentPDF = function _callee() {\n      var res, that, getTime, storageRef, ref, fullPath, uploadTask;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(DocumentPicker.getDocumentAsync({\n                type: \"application/pdf\"\n              }));\n\n            case 3:\n              res = _context.sent;\n              console.log(\"res : \" + JSON.stringify(res));\n              console.log(\"Type : \" + res.type);\n\n              if (res.type === \"success\") {\n                that = _assertThisInitialized(_this);\n                getTime = new Date().getTime();\n                storageRef = firebase.storage().ref();\n                ref = storageRef.child(\"/quiz/\" + getTime + \"-\" + res.name);\n                fullPath = ref.fullPath;\n                uploadTask = ref.putString(res.uri, \"data_url\");\n                ref.on(\"state_changed\", function (snapshot) {\n                  var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n                  console.log(\"Upload is \" + progress + \"% done\");\n\n                  switch (snapshot.state) {\n                    case firebase.storage.TaskState.PAUSED:\n                      console.log(\"Upload is paused\");\n                      break;\n\n                    case firebase.storage.TaskState.RUNNING:\n                      console.log(\"Upload is running\");\n                      break;\n                  }\n                }, function (error) {}, function () {\n                  uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n                    console.log(\"File available at\", downloadURL);\n                  });\n                });\n              }\n\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              alert(\"Unknown Error: \" + JSON.stringify(_context.t0));\n              throw _context.t0;\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 9]], Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(QuizUpload, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }\n      }, React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }\n      }, React.createElement(Card.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }), React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }, React.createElement(Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }\n      }, \"Qiuz Uploads \"), React.createElement(Paragraph, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, \"Time & Date\")), React.createElement(Card.Cover, {\n        source: {\n          uri: \"https://firebasestorage.googleapis.com/v0/b/educationporal.appspot.com/o/quiz%2F1604068768037-Lecture%203.pptx.pdf?alt=media&token=40d52f07-59b2-46ee-a45f-9428d412ed18\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }), React.createElement(Card.Actions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      }, React.createElement(Button, {\n        onPress: this.pickDocumentPDF,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, \"Upload\"))), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, this.state.fullPath), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 9\n        }\n      }, this.state.downloadURL));\n    }\n  }]);\n\n  return QuizUpload;\n}(React.Component);\n\nexport { QuizUpload as default };","map":{"version":3,"sources":["/Users/denoversshehroz/Documents/React Native/Rehan/EducationPortal/components/tutordashboard/QuizUpload.js"],"names":["React","firebase","DocumentPicker","Avatar","Button","Card","Title","Paragraph","QuizUpload","state","fullPath","downloadURL","pickDocumentPDF","getDocumentAsync","type","res","console","log","JSON","stringify","that","getTime","Date","storageRef","storage","ref","child","name","uploadTask","putString","uri","on","snapshot","progress","bytesTransferred","totalBytes","TaskState","PAUSED","RUNNING","error","getDownloadURL","then","alert","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"../../config/fire\";\nimport {\n  Text,\n  View,\n  StyleSheet,\n  Image,\n  ScrollView,\n  TextInput,\n  TouchableOpacity,\n  ImageBackground,\n  Alert\n} from \"react-native\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { Avatar, Button, Card, Title, Paragraph } from \"react-native-paper\";\n\nexport default class QuizUpload extends React.Component {\n  state = {\n    fullPath: \"\",\n    downloadURL: \"\"\n  };\n\n  pickDocumentPDF = async () => {\n    try {\n      const res = await DocumentPicker.getDocumentAsync({\n        type: \"application/pdf\"\n      });\n      //Printing the log realted to the file\n      console.log(\"res : \" + JSON.stringify(res));\n      console.log(\"Type : \" + res.type);\n      if (res.type === \"success\") {\n        let that = this;\n        let getTime = new Date().getTime();\n        let storageRef = firebase.storage().ref();\n        let ref = storageRef.child(`/quiz/${getTime}-${res.name}`);\n        let fullPath = ref.fullPath;\n        let uploadTask = ref.putString(res.uri, \"data_url\");\n        // .then(async snapshot => {\n        //   let downLink = await ref.getDownloadURL();\n        //   console.log(\"Uploaded a data_url string!\", downLink);\n        //   that.setState({\n        //     // downloadURL: ref.getDownloadURL(),\n        //     fullPath\n        //   });\n        // })\n        // .catch(err => {\n        //   console.error(err.message);\n        //   Alert.alert(err.message);\n        // });\n\n        // New Addintion\n        ref.on(\n          \"state_changed\",\n          function(snapshot) {\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress =\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n            switch (snapshot.state) {\n              case firebase.storage.TaskState.PAUSED: // or 'paused'\n                console.log(\"Upload is paused\");\n                break;\n              case firebase.storage.TaskState.RUNNING: // or 'running'\n                console.log(\"Upload is running\");\n                break;\n            }\n          },\n          function(error) {\n            // Handle unsuccessful uploads\n          },\n          function() {\n            // Handle successful uploads on complete\n            // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n            uploadTask.snapshot.ref\n              .getDownloadURL()\n              .then(function(downloadURL) {\n                console.log(\"File available at\", downloadURL);\n              });\n          }\n        );\n      }\n      // console.log(\"File Name : \" + res.name);\n      // console.log(\"File Size : \" + res.size);\n      //Setting the state to show single file attributes\n      // setSingleFile(res);\n    } catch (err) {\n      alert(\"Unknown Error: \" + JSON.stringify(err));\n      throw err;\n    }\n  };\n\n  render() {\n    return (\n      <View>\n        <Card>\n          <Card.Title />\n          <Card.Content>\n            <Title>Qiuz Uploads </Title>\n            <Paragraph>Time & Date</Paragraph>\n          </Card.Content>\n          <Card.Cover\n            source={{\n              uri:\n                \"https://firebasestorage.googleapis.com/v0/b/educationporal.appspot.com/o/quiz%2F1604068768037-Lecture%203.pptx.pdf?alt=media&token=40d52f07-59b2-46ee-a45f-9428d412ed18\"\n            }}\n          />\n          <Card.Actions>\n            <Button onPress={this.pickDocumentPDF}>Upload</Button>\n          </Card.Actions>\n        </Card>\n        <Text>{this.state.fullPath}</Text>\n        <Text>{this.state.downloadURL}</Text>\n      </View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}