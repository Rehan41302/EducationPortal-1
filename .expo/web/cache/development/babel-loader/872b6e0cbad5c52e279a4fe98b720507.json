{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/denoversshehroz/Documents/React Native/Rehan/EducationPortal/components/StudentRegister.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport * as React from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport firebase from \"../config/fire\";\nimport { firestore } from \"firebase\";\nimport { UrlIsValid } from \"../service/validations\";\nimport { connect } from \"react-redux\";\nimport store from \"../store/store\";\nimport { addUserDetailsAction } from \"../store/actions/userActions\";\n\nvar StudentRegister = function (_React$Component) {\n  _inherits(StudentRegister, _React$Component);\n\n  var _super = _createSuper(StudentRegister);\n\n  function StudentRegister() {\n    var _this;\n\n    _classCallCheck(this, StudentRegister);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      name: \"\",\n      subject: \"\",\n      level: \"\",\n      contactNumber: Number,\n      error: {},\n      disabled: true,\n      loading: false\n    };\n\n    _this.clearInputs = function () {\n      _this.setState({\n        name: \"\",\n        contactNumber: \"\",\n        level: \"\",\n        subject: \"\",\n        error: {}\n      });\n    };\n\n    _this.isValid = function () {\n      var _this$state = _this.state,\n          name = _this$state.name,\n          contactNumber = _this$state.contactNumber,\n          level = _this$state.level,\n          subject = _this$state.subject;\n      var noError = true;\n\n      if (!name || !contactNumber || !level || !subject) {\n        _this.setState(function (_ref) {\n          var errors = _ref.errors;\n          return {\n            errors: _objectSpread(_objectSpread({}, errors), {}, {\n              emptyError: \"All Fields are required.\"\n            })\n          };\n        });\n\n        noError = false;\n      }\n\n      return noError;\n    };\n\n    _this.uploadStudentDetails = function () {\n      console.log(\"clicked\", _this.state, _this.props.user);\n\n      _this.setState({\n        errors: {}\n      });\n\n      var _this$state2 = _this.state,\n          name = _this$state2.name,\n          contactNumber = _this$state2.contactNumber,\n          level = _this$state2.level,\n          subject = _this$state2.subject;\n      console.log({\n        isValid: _this.isValid()\n      });\n\n      if (_this.isValid()) {\n        var _this$props$user;\n\n        _this.setState({\n          loading: true\n        });\n\n        var db = firebase.firestore();\n        db.collection(\"students\").doc((_this$props$user = _this.props.user) == null ? void 0 : _this$props$user.id).set({\n          name: name,\n          contactNumber: contactNumber,\n          level: level,\n          subject: subject,\n          createTime: firestore.Timestamp.now()\n        }).then(function (res) {\n          var _this$props$user2, _this$props$user3;\n\n          store.dispatch(addUserDetailsAction(_objectSpread(_objectSpread({}, _this.props.user), {}, {\n            name: name,\n            contactNumber: contactNumber,\n            level: level,\n            subject: subject\n          })));\n          firebase.firestore().collection(\"users\").doc((_this$props$user2 = _this.props.user) == null ? void 0 : _this$props$user2.id).set({\n            id: (_this$props$user3 = _this.props.user) == null ? void 0 : _this$props$user3.id,\n            role: \"student\",\n            register: true\n          });\n          console.log(\"res---\", res);\n          setTimeout(function () {\n            _this.clearInputs();\n\n            _this.setState({\n              loading: false\n            });\n\n            _this.props.navigation.navigate(\"Student Profile\", {\n              data: res\n            });\n          }, 100);\n        }).catch(function (error) {\n          console.error(error.message);\n\n          _this.setState({\n            loading: false\n          });\n\n          Alert.alert(error.message);\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(StudentRegister, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$user4,\n          _this2 = this;\n\n      if ((_this$props$user4 = this.props.user) == null ? void 0 : _this$props$user4.name) {\n        this.props.navigation.replace(\"Student Registered\", {\n          screen: \"Student Profile\"\n        });\n      }\n\n      console.log(this.props.user);\n      var _this$state3 = this.state,\n          name = _this$state3.name,\n          contactNumber = _this$state3.contactNumber,\n          level = _this$state3.level,\n          subject = _this$state3.subject,\n          loading = _this$state3.loading;\n      var btnDisabled = name && contactNumber && level && subject ? false : true;\n      return React.createElement(ImageBackground, {\n        style: styles.image,\n        source: require(\"../assets/image/studentregisterpic.jpg\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.htext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }\n      }, \"Student Registration\"), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"Student Name\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: name,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            name: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"Interested for subject\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: subject,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            subject: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"student class level\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: level,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            level: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: styles.inputBox,\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        placeholder: \"student contact no\",\n        placeholderTextColor: \"#ffffff\",\n        selectionColor: \"#fff\",\n        value: contactNumber,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            contactNumber: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }), React.createElement(View, {\n        style: styles.btnView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }\n      }, React.createElement(Button, {\n        style: styles.btn,\n        onPress: this.uploadStudentDetails,\n        title: !this.state.loading ? \"Register\" : \"Loading...\",\n        color: \"#2196F3\",\n        disabled: btnDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return StudentRegister;\n}(React.Component);\n\nvar mapStatetoProps = function mapStatetoProps(state) {\n  console.log({\n    state: state\n  });\n  return {\n    user: state.authReducer.user,\n    isAuthenticated: state.authReducer.isAuthenticated\n  };\n};\n\nexport default connect(mapStatetoProps)(StudentRegister);\nvar styles = StyleSheet.create({\n  image: {\n    width: \"100%\",\n    height: \"100%\"\n  },\n  inputBox: {\n    width: 200,\n    backgroundColor: \"grey\",\n    borderRadius: 25,\n    marginLeft: 6,\n    marginBottom: 8,\n    paddingHorizontal: 19,\n    fontSize: 16,\n    color: \"#ffffff\",\n    marginVertical: 3\n  },\n  button: {\n    width: 160,\n    backgroundColor: \"#2196F3\",\n    borderRadius: 25,\n    marginVertical: 10,\n    paddingVertical: 13,\n    marginHorizontal: 6\n  },\n  buttonText: {\n    fontSize: 16,\n    fontWeight: \"500\",\n    color: \"white\",\n    textAlign: \"center\"\n  },\n  htext: {\n    marginTop: 9,\n    marginBottom: 72,\n    fontWeight: \"bold\",\n    fontSize: 26,\n    marginHorizontal: 22\n  }\n});","map":{"version":3,"sources":["/Users/denoversshehroz/Documents/React Native/Rehan/EducationPortal/components/StudentRegister.js"],"names":["React","firebase","firestore","UrlIsValid","connect","store","addUserDetailsAction","StudentRegister","state","name","subject","level","contactNumber","Number","error","disabled","loading","clearInputs","setState","isValid","noError","errors","emptyError","uploadStudentDetails","console","log","props","user","db","collection","doc","id","set","createTime","Timestamp","now","then","res","dispatch","role","register","setTimeout","navigation","navigate","data","catch","message","Alert","alert","replace","screen","btnDisabled","styles","image","require","htext","inputBox","text","btnView","btn","Component","mapStatetoProps","authReducer","isAuthenticated","StyleSheet","create","width","height","backgroundColor","borderRadius","marginLeft","marginBottom","paddingHorizontal","fontSize","color","marginVertical","button","paddingVertical","marginHorizontal","buttonText","fontWeight","textAlign","marginTop"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  Text,\n  View,\n  StyleSheet,\n  Image,\n  ScrollView,\n  TextInput,\n  TouchableOpacity,\n  ImageBackground,\n  Button,\n  StatusBar\n} from \"react-native\";\nimport firebase from \"../config/fire\";\nimport { firestore } from \"firebase\";\nimport { UrlIsValid } from \"../service/validations\";\nimport { connect } from \"react-redux\";\nimport store from \"../store/store\";\nimport { addUserDetailsAction } from \"../store/actions/userActions\";\nclass StudentRegister extends React.Component {\n  state = {\n    name: \"\",\n    subject: \"\",\n    level: \"\",\n    contactNumber: Number,\n    error: {},\n    disabled: true,\n    loading: false\n  };\n\n  clearInputs = () => {\n    this.setState({\n      name: \"\",\n      contactNumber: \"\",\n      level: \"\",\n      subject: \"\",\n      error: {}\n    });\n  };\n\n  isValid = () => {\n    const { name, contactNumber, level, subject } = this.state;\n    let noError = true;\n    if (!name || !contactNumber || !level || !subject) {\n      this.setState(({ errors }) => ({\n        errors: { ...errors, emptyError: \"All Fields are required.\" }\n      }));\n      noError = false;\n    }\n    return noError;\n  };\n\n  uploadStudentDetails = () => {\n    console.log(\"clicked\", this.state, this.props.user);\n    this.setState({ errors: {} });\n    const { name, contactNumber, level, subject } = this.state;\n    // this.clearInputs();\n    console.log({ isValid: this.isValid() });\n    if (this.isValid()) {\n      this.setState({ loading: true });\n      const db = firebase.firestore();\n      db.collection(\"students\")\n        .doc(this.props.user?.id)\n        .set({\n          name,\n          contactNumber,\n          level,\n          subject,\n          createTime: firestore.Timestamp.now()\n        })\n        .then(res => {\n          store.dispatch(\n            addUserDetailsAction({\n              ...this.props.user,\n              name,\n              contactNumber,\n              level,\n              subject\n            })\n          );\n          firebase\n            .firestore()\n            .collection(\"users\")\n            .doc(this.props.user?.id)\n            .set({\n              id: this.props.user?.id,\n              role: \"student\",\n              register: true\n            });\n\n          console.log(\"res---\", res);\n          setTimeout(() => {\n            this.clearInputs();\n            this.setState({ loading: false });\n            this.props.navigation.navigate(\"Student Profile\", { data: res });\n          }, 100);\n        })\n        .catch(error => {\n          console.error(error.message);\n          this.setState({ loading: false });\n          Alert.alert(error.message);\n        });\n    }\n  };\n  render() {\n    if (this.props.user?.name) {\n      this.props.navigation.replace(\"Student Registered\", {\n        screen: \"Student Profile\"\n      });\n    }\n    console.log(this.props.user);\n    const { name, contactNumber, level, subject, loading } = this.state;\n    let btnDisabled = name && contactNumber && level && subject ? false : true;\n    return (\n      <ImageBackground\n        style={styles.image}\n        source={require(\"../assets/image/studentregisterpic.jpg\")}\n      >\n        <ScrollView>\n          <Text style={styles.htext}>Student Registration</Text>\n          <TextInput\n            style={styles.inputBox}\n            underlineColorAndroid=\"rgba(0,0,0,0)\"\n            placeholder=\"Student Name\"\n            placeholderTextColor=\"#ffffff\"\n            selectionColor=\"#fff\"\n            value={name}\n            onChangeText={text => {\n              this.setState({ name: text });\n            }}\n          />\n\n          <TextInput\n            style={styles.inputBox}\n            underlineColorAndroid=\"rgba(0,0,0,0)\"\n            placeholder=\"Interested for subject\"\n            placeholderTextColor=\"#ffffff\"\n            selectionColor=\"#fff\"\n            value={subject}\n            onChangeText={text => {\n              this.setState({ subject: text });\n            }}\n          />\n\n          <TextInput\n            style={styles.inputBox}\n            underlineColorAndroid=\"rgba(0,0,0,0)\"\n            placeholder=\"student class level\"\n            placeholderTextColor=\"#ffffff\"\n            selectionColor=\"#fff\"\n            value={level}\n            onChangeText={text => {\n              this.setState({ level: text });\n            }}\n          />\n\n          <TextInput\n            style={styles.inputBox}\n            underlineColorAndroid=\"rgba(0,0,0,0)\"\n            placeholder=\"student contact no\"\n            placeholderTextColor=\"#ffffff\"\n            selectionColor=\"#fff\"\n            value={contactNumber}\n            onChangeText={text => {\n              this.setState({ contactNumber: text });\n            }}\n          />\n          <View style={styles.btnView}>\n            <Button\n              style={styles.btn}\n              onPress={this.uploadStudentDetails}\n              // title={!this.state.loading ? \"Submit\" : <ActivityIndicator />}\n              title={!this.state.loading ? \"Register\" : \"Loading...\"}\n              color=\"#2196F3\"\n              disabled={btnDisabled}\n            />\n          </View>\n        </ScrollView>\n      </ImageBackground>\n    );\n  }\n}\n\nconst mapStatetoProps = state => {\n  console.log({ state });\n  return {\n    user: state.authReducer.user,\n    isAuthenticated: state.authReducer.isAuthenticated\n  };\n};\n\nexport default connect(mapStatetoProps)(StudentRegister);\n\nconst styles = StyleSheet.create({\n  image: {\n    width: \"100%\",\n    height: \"100%\"\n  },\n  inputBox: {\n    width: 200,\n    backgroundColor: \"grey\",\n    borderRadius: 25,\n    marginLeft: 6,\n    marginBottom: 8,\n    paddingHorizontal: 19,\n    fontSize: 16,\n    color: \"#ffffff\",\n    marginVertical: 3\n  },\n  button: {\n    width: 160,\n    backgroundColor: \"#2196F3\",\n    borderRadius: 25,\n    marginVertical: 10,\n    paddingVertical: 13,\n    marginHorizontal: 6\n  },\n  buttonText: {\n    fontSize: 16,\n    fontWeight: \"500\",\n    color: \"white\",\n    textAlign: \"center\"\n  },\n  htext: {\n    marginTop: 9,\n    marginBottom: 72,\n    fontWeight: \"bold\",\n    fontSize: 26,\n    marginHorizontal: 22\n  }\n});\n"]},"metadata":{},"sourceType":"module"}